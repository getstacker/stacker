namespace 'config'

# Default
task '', ['config:parse'], desc: 'Process config files', ->
  console.log 'hi!'
  # .pipe (file) ->
  #   #process the file
  # .pipe dest 'config'

  # gulp.src conf.gzipFiles
  # .pipe gulp.dest conf.dist
  # src '*.stack'
  # .pipe dest '/config'
  log.info 'start of config >>>'
  # should not process sh some command
  ret = sh 'echo "hi from sh"'
  console.log ret
  ret = sudo 'cat root.test'
  ret = sudo 'echo hi from sudo'

  log.info '<<< end of config'

task 'show', ['config:parse'], desc: 'Output processed config files to stdout', ->
  # src from pipe
  # output to stdout

task 'parse', desc: 'Parse config file templates', ->
  log.info 'hi from config:parse'
  # src: *.stack
  # filter on files that have #!stacker
  # parse header as yaml and add to config
  # if not yet set, add config.output as file without the .stack
  # parse file as eco template



# config/php.ini.stack

# #!stacker """
# output: etc/php.ini
# conf:
#   php:
#     mamx_mem: 1000
# type: ini
# """
# max_mem = <%- conf.php.max_mem %>

